{% extends 'base.html' %}
{% block includes %}
    {{ super() }}
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    {% endblock %}
    {% block title %}
    Buying: {{item.name}}
    {% endblock %}

    {% block content %}
    <div id="buy-main">
        <div id="buy-top">
            <!-- left -->

            <div id="summary">
                <div id="summary-image">
                    <img src="../static/pippog.png" alt="">
                </div>
                <div id="description"></div>
            </div>

            <!-- right -->
            <div id="details">
                <p>{{item.name}} #{{item.id}}</p>
                <div id="price">
                    <p>Current Price</p>
                    <div id="price-amount">
                        {{item.price}} 
                        {{item.currency}}
                    </div>

                    <div id="author">
                        <span>Listed By:</span> {{item.author}}
                    </div>

                    <div id="buy-buttons">

                        <button> Buy Now </button>
                        <button> Make Offer </button>

                    </div>
                </div>
            </div>

        </div>

        <!-- bottom -->
        <div id="buy-bottom">

            <div id="listings">
                <table>
                    <thead>
                        <tr>
                            <th>Unit Price</th>
                            <th>Quantity</th>
                            <th>Expiration</th>
                            <th>From</th>
                        </tr>
                    </thead>
                    <tbody hx-post="./get-listing-data" hx-trigger="every 2s">
                        {% for listing in listing_data %}
                        <tr>
                            <td>{{ listing.unit_price }}</td>
                            <td>{{ Quantity }}</td>
                            <td>{{ Expiration }}</td>
                            <td>{{ From }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div id="offers">

            </div>

            <div id="activity">

            </div>


        </div>
    </div>
    {% endblock %}
